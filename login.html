<!DOCTYPE html>
<html lang="es">
    <head>
        <title>Log In-Escribano</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1,maximum-scale=1,minimum-scale=1">
        <link rel="stylesheet" href="estilos2.css">
        <link href="https://fonts.googleapis.com/css?family=Josefin+Sans|Montez|Pathway+Gothic+One" rel="stylesheet">
        <link rel="shortcut icon" type="image/x-icon" href="img/escribano.ico">
    
    </head>
    <body>
       <div class="contenedor">
           <header>
               <h1 class="title">Escribano</h1>
               <a href="formulario.html">Regístrate</a>
           </header>
           <div class="login">
               <article class="fondo">
                   <img src="img/escribano.jpg" alt="User">
                   <h3>Inicio de sesión</h3>
                   <form name="loginform" onSubmit="return validateForm();" action="index.html" method="post">
                        <label>User name</label>
                        
                        <input class="inp" type="text" placeholder="&#128394 Username" name="usr">
                        <input class="inp" type="password" placeholder="&#128273 Password" name="psw">

                        <a href=""class="he">He olvidado mi contraseña</a>
                        <input class="boton" type="submit" name="inicio" value="Iniciar sesión"/>

                   </form>

                   <input id="clickMe" type="button" value="clickme" onclick="test2();" />
                   

               </article>
           </div>

       </div>
       <script>
        const url = 'http://localhost:52336/api/users';
        const url2 = 'https://randomuser.me/api/?results=10';

        function test2(){
            
            fetch(url)
            .then((resp) => resp.json())
            .then(function(data) {
                
                console.log(data)
            })
            .catch(function(error) {
                console.log(error);
            });   


            /*fetch( url2, {mode: 'no-cors'} )
            .then((resp) => resp.json())
            .then(function(json) {
                // use the json
            })
            .catch( e => console.error( 'Something went wrong'+e) );

 */
              
        }

        function test(){
            console.log(';')
            
            fetch(url, {mode: 'no-cors'})
            .then(res => res.json())
            .then(data => {
                // code to handle the response
                data.forEach(user => {
                    // Log each movie's title
                    console.log(user.LoginName)
                    console.log('////')
                })
            })
        }
                
        // ******************************************************************************** //
        function validateForm() {
        console.log("enter");

        var un = document.loginform.usr.value;
        var pw = document.loginform.psw.value;

        var username = "a"; 
        var password = "a";
        
        if ((un == username) && (pw == password)) {
            return true;
        }
        else {
            alert ("Login was unsuccessful, please check your username and password");
            return false;
        }
        }

        // ******************************************************************************** //
        </script>
        
        
    </body>
</html>